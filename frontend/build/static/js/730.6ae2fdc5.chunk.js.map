{"version":3,"file":"static/js/730.6ae2fdc5.chunk.js","mappings":"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","sources":["component/Forgotpassword.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport GetLink from \"./apiLink\";\nexport default function ForgotPassword() {\n  const navigate = useNavigate();\n  const [email, setEmail] = useState(\"\");\n  const [otpSent, setOtpSent] = useState(false);\n  const [otp, setOtp] = useState(\"\");\n  const [otpMatched, setOtpMatched] = useState(false);\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [remainingAttempts, setRemainingAttempts] = useState(3);\n  const [receivedOtp, setReceivedOtp] = useState(\"\");\n  const handleEmailSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      console.log(`${GetLink()}/forgotpass/${email}`);\n      // Send OTP to the provided email address\n      const response = await fetch(`${GetLink()}/forgotpass/${email}`);\n\n      if (response.ok) {\n        // Set the state to indicate that OTP has been sent\n        setOtpSent(true);\n\n        // Get the OTP from the response\n        const data = await response.json();\n        const receivedOtp = data.otp;\n\n        // Set the OTP in the state\n        setReceivedOtp(receivedOtp);\n      } else {\n        toast.error(\"Email not registered\", {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n        });\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(\"Network error, please try again\", {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    }\n  };\n\n  const handleOtpSubmit = (e) => {\n    e.preventDefault();\n\n    if (otp == receivedOtp) {\n      setOtpMatched(true);\n    } else {\n      setRemainingAttempts((prevAttempts) => prevAttempts - 1);\n\n      if (remainingAttempts > 1) {\n        toast.error(\n          `Incorrect OTP, You have ${remainingAttempts - 1} attempt(s) left.`,\n          {\n            position: \"top-right\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n          }\n        );\n      } else {\n        toast.error(\"Incorrect OTP. No more attempts left.\", {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n        });\n        setEmail(\"\");\n        setOtp(\"\");\n        setNewPassword(\"\");\n        setOtpSent(false);\n        setOtpMatched(false);\n        navigate(\"/signin\");\n      }\n    }\n  };\n\n  const handlePasswordSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const response = await fetch(`${GetLink()}/forgotpassReset/${email}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          newPassword: newPassword,\n        }),\n      });\n\n      if (response.ok) {\n        toast.success(\"Password reset, please login again\", {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n        });\n\n        setEmail(\"\");\n        setOtp(\"\");\n        setNewPassword(\"\");\n        setOtpSent(false);\n        setOtpMatched(false);\n        navigate(\"/signin\");\n      }\n    } catch (error) {\n      console.error(\"Failed to change password:\", error);\n      toast.error(\"Failed to change password\", {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n      });\n    }\n  };\n\n  return (\n    <div>\n      <ToastContainer />\n      <div id=\"app\">\n        <section className=\"section\">\n          <div className=\"container mt-5\">\n            <div className=\"row\">\n              <div className=\"col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3\">\n                <div className=\"card card-primary\">\n                  <div className=\"card-header\">\n                    <h3 className=\"text-center\">Password Reset</h3>\n                  </div>\n                  <div className=\"card-body\">\n                    {otpMatched ? (\n                      <form onSubmit={handlePasswordSubmit}>\n                        <div className=\"form-group\">\n                          <label htmlFor=\"newPassword\">New Password:</label>\n                          <input\n                            type=\"password\"\n                            id=\"newPassword\"\n                            className=\"form-control\"\n                            value={newPassword}\n                            onChange={(e) => setNewPassword(e.target.value)}\n                          />\n                        </div>\n                        <button\n                          className=\"btn btn-primary btn-block\"\n                          type=\"submit\"\n                        >\n                          Set New Password\n                        </button>\n                        <div className=\"mt-4 text-muted text-center\">\n                          <Link to=\"/signin\">Login</Link>\n                        </div>\n                      </form>\n                    ) : otpSent ? (\n                      <form onSubmit={handleOtpSubmit} className=\"otp-form\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"otp\">OTP:</label>\n                          <input\n                            type=\"text\"\n                            id=\"otp\"\n                            className=\"form-control\"\n                            value={otp}\n                            onChange={(e) => setOtp(e.target.value)}\n                          />\n                        </div>\n                        <button\n                          type=\"submit\"\n                          className=\"btn btn-primary btn-block\"\n                        >\n                          Submit OTP\n                        </button>\n                        <div className=\"mt-4 text-muted text-center\">\n                          <Link to=\"/signin\">Login</Link>\n                        </div>\n                      </form>\n                    ) : (\n                      <form onSubmit={handleEmailSubmit}>\n                        <div className=\"form-group\">\n                          <label htmlFor=\"email\">Email:</label>\n                          <input\n                            type=\"email\"\n                            id=\"email\"\n                            className=\"form-control\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                          />\n                        </div>\n                        <button\n                          className=\"btn btn-primary btn-lg btn-block\"\n                          type=\"submit\"\n                        >\n                          Send OTP\n                        </button>\n                        <div className=\"mt-4 text-muted text-center\">\n                          <Link to=\"/signin\">Login</Link>\n                        </div>\n                      </form>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n}\n"],"names":["ForgotPassword","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","otpSent","setOtpSent","_useState5","_useState6","otp","setOtp","_useState7","_useState8","otpMatched","setOtpMatched","_useState9","_useState10","newPassword","setNewPassword","_useState11","_useState12","remainingAttempts","setRemainingAttempts","_useState13","_useState14","receivedOtp","setReceivedOtp","handleEmailSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","_receivedOtp","wrap","_context","prev","next","preventDefault","console","log","concat","GetLink","fetch","sent","ok","json","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","t0","stop","_x","apply","arguments","handlePasswordSubmit","_ref2","_callee2","_context2","method","headers","body","JSON","stringify","success","_x2","_jsxs","children","_jsx","ToastContainer","id","className","onSubmit","htmlFor","type","value","onChange","target","Link","to","prevAttempts"],"sourceRoot":""}