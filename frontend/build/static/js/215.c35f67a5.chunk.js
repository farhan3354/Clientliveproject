"use strict";(self.webpackChunkmba=self.webpackChunkmba||[]).push([[215,176],{6176:function(e,a,t){t.r(a);var n=t(5671),s=t(3144),r=t(136),i=t(7277),l=t(2791),o=t(2719),d=t.n(o),c=t(184),h=function(e){(0,r.Z)(t,e);var a=(0,i.Z)(t);function t(e){var s;return(0,n.Z)(this,t),(s=a.call(this,e)).handleCloseModal=function(){s.setState({showModal:!1})},s.state={showModal:e.show},s}return(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.program;return this.state.showModal?(0,c.jsx)("div",{className:"modal fade show program_detail_modal",id:"modal-".concat(e._id),tabIndex:"-1",role:"dialog","aria-labelledby":"modal-".concat(e._id,"-label"),"aria-hidden":"true",style:{display:"block",marginTop:"50px"},children:(0,c.jsx)("div",{className:"modal-dialog",role:"document",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",id:"modal-".concat(e._id,"-label"),children:"Program Details"}),(0,c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.handleCloseModal,children:(0,c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsxs)("div",{className:"f-div common_div",children:[(0,c.jsxs)("p",{children:["Name: ",e.name]}),(0,c.jsxs)("p",{children:["Description: ",e.description]})]}),(0,c.jsxs)("div",{className:"s-div common_div",children:[(0,c.jsxs)("p",{children:["Total Members: ",e.totalMembers]}),(0,c.jsxs)("p",{children:["Points: ",e.points]})]}),(0,c.jsx)("div",{className:"t-div common_div",children:(0,c.jsxs)("p",{children:["Date Created : ",e.dateCreated]})}),e.images[0]&&(0,c.jsx)("p",{children:"Images"}),(0,c.jsx)("div",{className:"images",children:d()()+"/"+e.images&&(0,c.jsx)("img",{src:d()()+"/"+e.images,width:100,height:100})})]})]})})}):null}}]),t}(l.Component);a.default=h},3215:function(e,a,t){t.r(a);var n=t(1413),s=t(5671),r=t(3144),i=t(136),l=t(7277),o=t(2791),d=t(6176),c=t(337),h=(t(8988),t(9085)),m=(t(5462),t(2959)),g=t(2719),u=t.n(g),p=t(184),b=function(e){(0,i.Z)(t,e);var a=(0,l.Z)(t);function t(e){var r;return(0,s.Z)(this,t),(r=a.call(this,e)).handleEditClick=function(e,a){r.setState({editedProgramId:e}),r.setState({editMode:!0}),r.setState({editedPoints:a})},r.handleSaveClick=function(e){var a=r.state.editedPoints;r.setState({btnloading:!0}),fetch("".concat(u()(),"/edit/").concat(e,"/").concat(a),{method:"PUT"}).then((function(t){if(!t.ok)throw r.setState({btnloading:!1}),new Error("Failed to update points");r.setState({btnloading:!1});var s=r.state.programs.map((function(t){return t.programId===e?(0,n.Z)((0,n.Z)({},t),{},{points:a}):t}));r.setState({programs:s,editMode:!1,editedPoints:""})})).catch((function(e){console.error(e),r.setState({btnloading:!1})}))},r.handleModal=function(e){r.setState({programActive:e})},r.handleDeleteProgram=function(e){(0,c._1)({title:"Confirm",message:"Deleting this will vanish all users points. Still want to delete?",buttons:[{label:"Yes",onClick:function(){r.setState({btnloading:!0}),fetch("".concat(u()(),"/deleteprogram/").concat(e),{method:"DELETE"}).then((function(a){if(!a.ok)throw r.setState({btnloading:!1}),new Error("Failed to delete program");r.setState({btnloading:!1});var t=r.state.programs.filter((function(a){return a.programId!==e}));r.setState({programs:t}),(0,h.Am)("Program deleted!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,className:"color_green"})})).catch((function(e){console.error(e),r.setState({btnloading:!1})}))}},{label:"No",onClick:function(){}}]})},r.handleSearchChange=function(e){r.setState({searchValue:e.target.value})},r.handlePageChange=function(e){r.setState({currentPage:e})},r.handleNextPage=function(){var e=r.state.currentPage;r.setState({currentPage:e+1})},r.handlePrevPage=function(){var e=r.state.currentPage;r.setState({currentPage:e-1})},r.state={programs:[],currentPage:1,programsPerPage:10,searchValue:"",editMode:!1,editedPoints:"",editedProgramId:"",programActive:null,loading:!0,btnloading:!1},r}return(0,r.Z)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(u()()+"/programs").then((function(e){return e.json()})).then((function(a){console.log(a),e.setState({programs:a,loading:!1})})).catch((function(e){return console.error("Error fetching programs:",e)}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.programs,n=a.currentPage,s=a.programsPerPage,r=a.searchValue,i=a.loading,l=t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})),o=n*s,c=o-s,g=l.slice(c,o),b=Math.ceil(l.length/s),x=Math.max(1,n-5),j=Math.min(x+10-1,b);x=Math.max(j-10+1,1);var v=Array.from({length:j-x+1},(function(e,a){return x+a}));return(0,p.jsxs)("div",{className:"main-content",children:[i&&(0,p.jsx)(m.default,{}),(0,p.jsx)(h.Ix,{}),(0,p.jsx)("section",{className:"section",children:(0,p.jsx)("div",{className:"section-body",children:(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("div",{className:"col-12",children:(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)("h4",{children:"Manage Program"})}),(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsxs)("div",{className:"table-responsive",children:[(0,p.jsx)("div",{className:"mb-3 tablesearch",children:(0,p.jsx)("input",{type:"text",placeholder:"Search by name",value:r,onChange:this.handleSearchChange})}),(0,p.jsxs)("table",{className:"table table-striped dataTable no-footer",id:"table-1",role:"grid","aria-describedby":"table-1_info",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{role:"row",children:[(0,p.jsx)("th",{className:"text-center sorting_asc",tabIndex:"0","aria-controls":"table-1",rowspan:"1",colSpan:"1","aria-sort":"ascending","aria-label":"#: activate to sort column descending",children:"#"}),(0,p.jsx)("th",{className:"sorting",tabIndex:"0","aria-controls":"table-1",rowspan:"1",colSpan:"1","aria-label":"Task Name: activate to sort column ascending",children:"Name"}),(0,p.jsx)("th",{className:"sorting_disabled",rowspan:"1",colSpan:"1","aria-label":"Progress",children:"Total Members"}),(0,p.jsx)("th",{className:"sorting_disabled",rowspan:"1",colSpan:"1","aria-label":"Members",children:"Points"}),(0,p.jsx)("th",{className:"sorting",tabIndex:"0","aria-controls":"table-1",rowspan:"1",colSpan:"1","aria-label":"Action: activate to sort column ascending",children:"Image"}),(0,p.jsx)("th",{className:"sorting",tabIndex:"0","aria-controls":"table-1",rowspan:"1",colSpan:"1","aria-label":"Action: activate to sort column ascending",children:"Action"})]})}),(0,p.jsx)("tbody",{children:g.map((function(a,t){return(0,p.jsxs)("tr",{role:"row",className:t%2===0?"even":"odd",children:[(0,p.jsx)("td",{className:"sorting_1",children:t+1}),(0,p.jsx)("td",{children:a.name}),(0,p.jsx)("td",{children:a.totalMembers}),(0,p.jsx)("td",{children:e.state.editMode&&e.state.editedProgramId===a.programId?(0,p.jsx)("input",{type:"number",value:e.state.editedPoints,onChange:function(a){return e.setState({editedPoints:a.target.value})},style:{width:"50px",borderRadius:"5px"}}):a.points}),(0,p.jsx)("td",{children:(0,p.jsx)("img",{src:u()()+"/"+a.images,width:50,height:50})}),(0,p.jsxs)("td",{children:[e.state.editMode&&e.state.editedProgramId===a.programId?(0,p.jsx)("button",{disabled:e.state.btnloading,className:"btn btn-primary",onClick:function(){return e.handleSaveClick(a.programId)},children:"Save"}):(0,p.jsx)("button",{disabled:e.state.btnloading,className:"btn btn-primary",onClick:function(){return e.handleEditClick(a.programId,a.points)},children:"Edit"}),(0,p.jsx)("button",{disabled:e.state.btnloading,className:"btn btn-danger",onClick:function(){return e.handleDeleteProgram(a.programId)},children:"Delete"})]}),e.state.programActive===a&&(0,p.jsx)(d.default,{program:a,show:!0})]},a.programId)}))})]})]}),(0,p.jsx)("div",{className:"paginationclass",children:(0,p.jsxs)("ul",{className:"pagination",children:[(0,p.jsx)("li",{className:"page-item ".concat(1===n?"disabled":""),children:(0,p.jsx)("button",{className:"page-link",onClick:this.handlePrevPage,children:"Previous"})}),v.map((function(a){return(0,p.jsx)("li",{className:"page-item ".concat(n===a?"active":""),children:(0,p.jsx)("button",{className:"page-link",onClick:function(){return e.handlePageChange(a)},children:a})},a)})),(0,p.jsx)("li",{className:"page-item ".concat(n===b?"disabled":""),children:(0,p.jsx)("button",{className:"page-link",onClick:this.handleNextPage,children:"Next"})})]})})]})]})})})})})]})}}]),t}(o.Component);a.default=b}}]);
//# sourceMappingURL=215.c35f67a5.chunk.js.map