"use strict";(self.webpackChunkmba=self.webpackChunkmba||[]).push([[799],{2799:function(e,t,n){n.r(t);var a=n(5671),r=n(3144),d=n(136),i=n(7277),s=n(2791),c=n(2959),l=n(2719),o=n.n(l),h=n(9085),u=n(184),w=function(e){(0,d.Z)(n,e);var t=(0,i.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={rewards:[],loading:!0,newRewardType:"",newRewardGift:"",newRewardImage:null,btnloading:!1},r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this;fetch(o()()+"/rewards").then((function(e){return e.json()})).then((function(t){t=t.sort((function(e,t){return e.rewardType-t.rewardType})),e.setState({rewards:t,loading:!1})})).catch((function(e){console.error("Error fetching rewards:",e)}))}},{key:"handleDeleteClick",value:function(e){var t=this;this.setState({btnloading:!0}),fetch("".concat(o()(),"/deleteReward/").concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(n){t.setState({btnloading:!1}),n&&(h.Am.success(n.message),t.setState((function(t){return{rewards:t.rewards.filter((function(t){return t.rewardId!==e}))}})))})).catch((function(e){t.setState({btnloading:!1}),console.error("Error deleting reward:",e)}))}},{key:"handleAddClick",value:function(){var e=this;this.setState({btnloading:!0});var t=this.state,n=t.newRewardType,a=t.newRewardGift,r=t.newRewardImage,d=new FormData;d.append("rewardType",n),d.append("rewardGift",a),r&&d.append("image",r),fetch("".concat(o()(),"/addReward"),{method:"POST",body:d}).then((function(e){return e.json()})).then((function(t){e.setState({btnloading:!1}),t&&(e.setState({newRewardType:"",newRewardGift:"",newRewardImage:null}),h.Am.success(t.message),fetch(o()()+"/rewards").then((function(e){return e.json()})).then((function(t){t=t.sort((function(e,t){return e.rewardType-t.rewardType})),e.setState({rewards:t,loading:!1})})).catch((function(e){console.error("Error fetching rewards:",e)})))})).catch((function(t){e.setState({btnloading:!1}),console.error("Error adding reward:",t)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.rewards,a=t.loading,r=t.newRewardType,d=t.newRewardGift;return(0,u.jsxs)("div",{className:"main-content",children:[a&&(0,u.jsx)(c.default,{}),(0,u.jsx)(h.Ix,{}),(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-lg-12",children:(0,u.jsx)("div",{className:"card",children:(0,u.jsx)("div",{className:"card-body",children:(0,u.jsxs)("div",{className:"text-white",children:[(0,u.jsx)("h4",{className:"mb-0 font-24",children:"Rewards"}),(0,u.jsxs)("div",{style:{display:"flex"},children:[(0,u.jsx)("div",{children:(0,u.jsx)("input",{style:{margin:"10px",padding:"2px 10px"},type:"text",placeholder:"Points",value:r,onChange:function(t){var n=t.target.value.replace(/[^0-9]/g,"");e.setState({newRewardType:n})}})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{style:{margin:"10px",padding:"2px 10px",width:"350px"},type:"text",placeholder:"Reward Gift",value:d,onChange:function(t){return e.setState({newRewardGift:t.target.value})}})}),(0,u.jsx)("div",{style:{width:"110px"},children:(0,u.jsx)("input",{style:{margin:"10px",padding:"1px 1px"},type:"file",name:"rewardImage",accept:"image/*",onChange:function(t){var n=t.target.files[0];e.setState({newRewardImage:n,selectedFileName:n.name})},placeholder:"choose image"})}),(0,u.jsx)("p",{style:{margin:"10px",padding:"5px 1px"},children:this.state.selectedFileName}),(0,u.jsx)("button",{onClick:function(){return e.handleAddClick()},className:"add-button1",style:{width:"120px",margin:"10px",padding:"1px 1px"},children:"Add Reward"})]}),(0,u.jsxs)("table",{className:"table table-striped dataTable no-footer",id:"table-1",role:"grid","aria-describedby":"table-1_info",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Points"}),(0,u.jsx)("th",{children:"Reward"}),(0,u.jsx)("th",{children:"Image"}),(0,u.jsx)("th",{children:"Action"})]})}),(0,u.jsx)("tbody",{children:n.map((function(t){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:t.rewardType}),(0,u.jsx)("td",{children:t.rewardGift}),(0,u.jsx)("td",{children:(0,u.jsx)("img",{src:o()()+"/"+t.image,width:50,height:50})}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{disabled:e.state.btnloading,className:"btn btn-danger",onClick:function(){return e.handleDeleteClick(t.rewardId)},children:"Delete"})})]},t.id)}))})]})]})})})})})]})}}]),n}(s.Component);t.default=w}}]);
//# sourceMappingURL=799.4cc67f4f.chunk.js.map