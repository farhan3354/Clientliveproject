"use strict";(self.webpackChunkmba=self.webpackChunkmba||[]).push([[730],{2730:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var s=r(4165),n=r(5861),a=r(9439),o=r(2791),c=r(7689),i=r(1087),l=r(9085),d=(r(5462),r(2719)),u=r.n(d),m=r(184);function p(){var e=(0,c.s0)(),t=(0,o.useState)(""),r=(0,a.Z)(t,2),d=r[0],p=r[1],h=(0,o.useState)(!1),g=(0,a.Z)(h,2),x=g[0],f=g[1],b=(0,o.useState)(""),v=(0,a.Z)(b,2),j=v[0],N=v[1],w=(0,o.useState)(!1),k=(0,a.Z)(w,2),O=k[0],P=k[1],C=(0,o.useState)(""),y=(0,a.Z)(C,2),S=y[0],Z=y[1],T=(0,o.useState)(3),A=(0,a.Z)(T,2),B=A[0],H=A[1],F=(0,o.useState)(""),D=(0,a.Z)(F,2),I=D[0],L=D[1],U=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(t){var r,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,console.log("".concat(u()(),"/forgotpass/").concat(d)),e.next=5,fetch("".concat(u()(),"/forgotpass/").concat(d));case 5:if(!(r=e.sent).ok){e.next=15;break}return f(!0),e.next=10,r.json();case 10:n=e.sent,a=n.otp,L(a),e.next=16;break;case 15:l.Am.error("Email not registered",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),l.Am.error("Network error, please try again",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var t=(0,n.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,t.next=4,fetch("".concat(u()(),"/forgotpassReset/").concat(d),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:S})});case 4:t.sent.ok&&(l.Am.success("Password reset, please login again",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),p(""),N(""),Z(""),f(!1),P(!1),e("/signin")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Failed to change password:",t.t0),l.Am.error("Failed to change password",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return(0,m.jsxs)("div",{children:[(0,m.jsx)(l.Ix,{}),(0,m.jsx)("div",{id:"app",children:(0,m.jsx)("section",{className:"section",children:(0,m.jsx)("div",{className:"container mt-5",children:(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-6 offset-lg-3",children:(0,m.jsxs)("div",{className:"card card-primary",children:[(0,m.jsx)("div",{className:"card-header",children:(0,m.jsx)("h3",{className:"text-center",children:"Password Reset"})}),(0,m.jsx)("div",{className:"card-body",children:O?(0,m.jsxs)("form",{onSubmit:E,children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"newPassword",children:"New Password:"}),(0,m.jsx)("input",{type:"password",id:"newPassword",className:"form-control",value:S,onChange:function(e){return Z(e.target.value)}})]}),(0,m.jsx)("button",{className:"btn btn-primary btn-block",type:"submit",children:"Set New Password"}),(0,m.jsx)("div",{className:"mt-4 text-muted text-center",children:(0,m.jsx)(i.rU,{to:"/signin",children:"Login"})})]}):x?(0,m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),j==I?P(!0):(H((function(e){return e-1})),B>1?l.Am.error("Incorrect OTP, You have ".concat(B-1," attempt(s) left."),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}):(l.Am.error("Incorrect OTP. No more attempts left.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),p(""),N(""),Z(""),f(!1),P(!1),e("/signin")))},className:"otp-form",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"otp",children:"OTP:"}),(0,m.jsx)("input",{type:"text",id:"otp",className:"form-control",value:j,onChange:function(e){return N(e.target.value)}})]}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit OTP"}),(0,m.jsx)("div",{className:"mt-4 text-muted text-center",children:(0,m.jsx)(i.rU,{to:"/signin",children:"Login"})})]}):(0,m.jsxs)("form",{onSubmit:U,children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,m.jsx)("input",{type:"email",id:"email",className:"form-control",value:d,onChange:function(e){return p(e.target.value)}})]}),(0,m.jsx)("button",{className:"btn btn-primary btn-lg btn-block",type:"submit",children:"Send OTP"}),(0,m.jsx)("div",{className:"mt-4 text-muted text-center",children:(0,m.jsx)(i.rU,{to:"/signin",children:"Login"})})]})})]})})})})})})]})}}}]);
//# sourceMappingURL=730.6ae2fdc5.chunk.js.map