"use strict";(self.webpackChunkmba=self.webpackChunkmba||[]).push([[214],{5214:function(e,a,t){t.r(a);var i=t(5671),n=t(3144),r=t(136),s=t(7277),o=t(2791),l=t(9085),m=(t(5462),t(2719)),c=t.n(m),d=t(184),g=function(e){(0,r.Z)(t,e);var a=(0,s.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=a.call(this,e)).showNotification=function(e,a){n.setState({notification:{message:e,type:a}}),setTimeout((function(){n.setState({notification:null})}),3e3)},n.resetFields=function(){document.getElementById("add-program-form").reset()},n.handleSubmit=function(e){if(e.preventDefault(),n.setState({btnloading:!0}),console.log("here"),null===n.state.imageFile)return(0,l.Am)("Please add an image !",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,className:"color_green"}),void n.setState({btnloading:!1});var a=e.target.elements.name.value,t=e.target.elements.points.value,i=e.target.elements.description.value,r=e.target.elements.promotionLink.value,s=new FormData;s.append("name",a),s.append("points",t),s.append("description",i),s.append("images",n.state.imageFile),s.append("promotionLink",r),console.log(s),console.log(n.state.imageFile),fetch(c()()+"/addprogram",{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){e.message&&(n.resetFields(),(0,l.Am)("Program Added!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,className:"color_green"}),n.setState({btnloading:!1}),setTimeout((function(){n.props.setCurrclickFunc("manageProgram")}),2e3)),e.error&&(n.setState({btnloading:!1}),n.showNotification(e.error,"error"))})).catch((function(e){n.setState({btnloading:!1}),console.error(e)}))},n.handleImagePreview=function(e,a){var t=new FileReader,i=e.target.files[0];n.setState((function(e){return{imageFile:i}})),t.onloadend=function(){var e=t.result;n.setState((function(a){return{images:e}}))},i&&t.readAsDataURL(i)},n.state={notification:null,images:"",imageFile:null,btnloading:!1},n}return(0,n.Z)(t,[{key:"render",value:function(){var e=this;return(0,d.jsxs)("div",{className:"main-content",children:[(0,d.jsx)(l.Ix,{}),(0,d.jsx)("section",{className:"section",children:(0,d.jsx)("div",{className:"card",children:(0,d.jsx)("div",{className:"card-body",children:(0,d.jsx)("div",{className:"col-lg-12",children:(0,d.jsxs)("form",{onSubmit:this.handleSubmit,id:"add-program-form",encType:"multipart/form-data",children:[(0,d.jsx)("div",{className:"card-header",children:(0,d.jsx)("h4",{children:"Program details."})}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Program Name"}),(0,d.jsx)("input",{type:"text",className:"form-control",required:!0,name:"name",placeholder:"Program Name*"})]}),(0,d.jsxs)("div",{className:"form-group mb-0",children:[(0,d.jsx)("label",{children:"Details"}),(0,d.jsx)("textarea",{className:"form-control",name:"description",placeholder:"Program details..."})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Program Points"}),(0,d.jsx)("input",{type:"text",className:"form-control",required:!0,name:"points",placeholder:"Program Points*"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Promotion Link"}),(0,d.jsx)("input",{type:"text",className:"form-control",required:!0,name:"promotionLink",placeholder:"Promotion Link*"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Program image"}),(0,d.jsx)("div",{className:"form-group row mb-4",children:(0,d.jsx)("div",{className:"col-sm-4 col-md-4",children:(0,d.jsxs)("div",{id:"image-preview",className:"image-preview",children:[(0,d.jsx)("label",{htmlFor:"image-upload",id:"image-label",children:this.state.images?(0,d.jsx)("img",{src:this.state.images,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%"}}):"Choose File"}),(0,d.jsx)("input",{type:"file",name:"image1",id:"image-upload",onChange:function(a){return e.handleImagePreview(a,1)}})]})})})]})]}),(0,d.jsx)("div",{className:"card-footer text-right",children:(0,d.jsx)("button",{disabled:this.state.btnloading,className:"btn btn-primary",type:"submit",children:"Submit"})})]})})})})})]})}}]),t}(o.Component);a.default=g}}]);
//# sourceMappingURL=214.6a339ae2.chunk.js.map