"use strict";(self.webpackChunkmba=self.webpackChunkmba||[]).push([[931],{1931:function(e,n,t){t.r(n);var i=t(5671),o=t(3144),a=t(136),r=t(7277),s=t(2791),c=t(2959),d=t(2719),l=t.n(d),h=t(9085),u=t(184),m=function(e){(0,a.Z)(t,e);var n=(0,r.Z)(t);function t(e){var o;return(0,i.Z)(this,t),(o=n.call(this,e)).handleEditPromotionLink=function(e,n){o.setState({editedSiteId:e,editedPromotionLink:n})},o.handleSavePromotionLink=function(e){var n=o.state.editedPromotionLink;console.log(e),n&&fetch("".concat(l()(),"/editPromotion/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({promotionLink:n})}).then((function(e){return e.json()})).then((function(e){o.setState({editedSiteId:null,editedPromotionLink:""}),h.Am.success(e.message)})).catch((function(e){return console.error("Error updating promotion link:",e)}))},o.handleCancelEdit=function(){o.setState({editedSiteId:null,editedPromotionLink:""})},o.handlePromotionLinkChange=function(e){o.setState({editedPromotionLink:e.target.value})},o.handlePageChange=function(e){o.setState({currentPage:e})},o.state={sites:[],newSite:"",currentPage:1,itemsPerPage:10,editedSiteId:null,editedPromotionLink:"",loading:!0},o}return(0,o.Z)(t,[{key:"componentDidMount",value:function(){this.fetchSites()}},{key:"fetchSites",value:function(){var e=this;fetch(l()()+"/programs").then((function(e){return e.json()})).then((function(n){e.setState({sites:n,loading:!1})})).catch((function(e){return console.error("Error fetching sites:",e)}))}},{key:"render",value:function(){var e=this,n=this.state,t=n.sites,i=n.currentPage,o=n.itemsPerPage,a=n.editedSiteId,r=n.editedPromotionLink,s=n.loading,d=i*o,l=d-o,m=t.slice(l,d).map((function(n,t){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:n.name}),(0,u.jsx)("td",{children:n.programId===a?(0,u.jsx)("input",{style:{borderRadius:"5px",width:"400px"},type:"text",value:r,onChange:e.handlePromotionLinkChange}):n.promotionLink}),(0,u.jsx)("td",{children:n.programId===a?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"add-button1",onClick:function(){return e.handleSavePromotionLink(n.programId)},children:"Save"}),(0,u.jsx)("button",{onClick:e.handleCancelEdit,children:"Cancel"})]}):(0,u.jsxs)(u.Fragment,{children:[!n.promotionLink&&(0,u.jsx)("button",{className:"add-button1",onClick:function(){return e.handleEditPromotionLink(n.programId,n.promotionLink)},children:"Add"}),n.promotionLink&&(0,u.jsx)("button",{className:"add-button1",onClick:function(){return e.handleEditPromotionLink(n.programId,n.promotionLink)},children:"Edit"})]})})]},t)})),g=Math.ceil(t.length/o),x=Array.from({length:g},(function(e,n){return n+1}));return(0,u.jsxs)("div",{className:"main-content",children:[s&&(0,u.jsx)(c.default,{}),(0,u.jsx)(h.Ix,{}),(0,u.jsx)("section",{className:"section",children:(0,u.jsx)("div",{className:"section-body",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-12",children:(0,u.jsxs)("div",{className:"card",children:[(0,u.jsx)("div",{className:"card-header",children:(0,u.jsx)("h4",{children:"Promotion Site"})}),(0,u.jsx)("div",{className:"card-body",children:(0,u.jsx)("div",{className:"table-responsive",children:(0,u.jsxs)("table",{className:"table table-striped dataTable no-footer",style:{textAlign:"initial"},children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Prorgram Name"}),(0,u.jsx)("th",{children:"Promotion Site Link"}),(0,u.jsx)("th",{children:"Actions"})]})}),(0,u.jsx)("tbody",{children:m})]})})}),(0,u.jsx)("div",{className:"card-footer",children:(0,u.jsx)("div",{className:"pagination justify-content-center",children:(0,u.jsxs)("ul",{className:"pagination",children:[(0,u.jsx)("li",{className:"page-item ".concat(1===i?"disabled":""),children:(0,u.jsx)("button",{className:"page-link",onClick:function(){return e.handlePageChange(i-1)},children:"Previous"})}),x.map((function(n){return(0,u.jsx)("li",{className:"page-item ".concat(i===n?"active":""),children:(0,u.jsx)("button",{className:"page-link",onClick:function(){return e.handlePageChange(n)},children:n})},n)})),(0,u.jsx)("li",{className:"page-item ".concat(i===g?"disabled":""),children:(0,u.jsx)("button",{className:"page-link",onClick:function(){return e.handlePageChange(i+1)},children:"Next"})})]})})})]})})})})})]})}}]),t}(s.Component);n.default=m}}]);
//# sourceMappingURL=931.e8155d50.chunk.js.map